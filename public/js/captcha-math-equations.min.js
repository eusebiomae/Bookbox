"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var e,a=1,n=arguments.length;a<n;a++)for(var i in e=arguments[a])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},CaptchaMathEquations=function(){function CaptchaMathEquations(t,e){this.context=null,this.input=this.createElement("input"),this.resetButton=this.createElement("button"),this.elemMsgError=this.createElement("span"),this.code="",this.options={classInput:""},this.options=__assign({},this.options,e),this.elem=document.getElementById(t)||this.createElement("div"),this.setStyles(this.elem,{textAlign:"center","display": "inline-block"}),this.canvas=this.createElement("canvas")}return CaptchaMathEquations.prototype.createElement=function(t){return document.createElement(t)},CaptchaMathEquations.prototype.setStyles=function(t,e){for(var a in e)t.style[a]=e[a]},CaptchaMathEquations.prototype.appendChild=function(t){this.elem.appendChild(t)},CaptchaMathEquations.prototype.addCanvas=function(){this.canvas=this.createElement("canvas"),this.canvas.style.width="95px",this.canvas.style.height="40px",this.canvas.style.verticalAlign="middle",this.appendChild(this.canvas)},CaptchaMathEquations.prototype.clearCanvas=function(){this.context&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},CaptchaMathEquations.prototype.getContext=function(){this.context=this.canvas.getContext("2d")},CaptchaMathEquations.prototype.addInputElement=function(){var t=this.createElement("input");t.setAttribute("type","text"),t.setAttribute("placeholder","Digite o resultado aqui"),t.style.width="195px",t.style.display="inline",t.style.marginLeft="10px",this.options.classInput&&t.classList.add(this.options.classInput),this.input=t,this.appendChild(t)},CaptchaMathEquations.prototype.addResetButton=function(){var t=this.createElement("button");t.innerHTML="&#8635;",t.setAttribute("type","reset"),this.setStyles(t,{marginBottom:"5px",backgroundColor:"#4c45e4",color:"#fff",fontWeight:"bold",fontSize:"19px",border:"none",cursor:"pointer",padding:"2px 7px"}),this.appendChild(t),t.addEventListener("click",this.handleClickResetButton.bind(this)),this.resetButton=t},CaptchaMathEquations.prototype.addMsgError=function(){var t=this.elemMsgError;t.innerText="Digite o valor da soma correta",this.setStyles(t,{fontSize:"14px",color:"#f00",display:"none"}),this.appendChild(t)},CaptchaMathEquations.prototype.resetTransformation=function(){this.context&&this.context.setTransform(1,0,0,1,0,0)},CaptchaMathEquations.prototype.writeCode=function(){if(this.getContext(),this.context){this.context.font="100px Arial";for(var t=this.code,e=0;e<t.length;e++)this.context.fillStyle=this.getRandomColor(),this.transformContext(e),this.context.fillText(t[e],50*e,76),this.resetTransformation()}},CaptchaMathEquations.prototype.resetStyling=function(){this.input.style.borderColor=null,this.elemMsgError.style.display="none"},CaptchaMathEquations.prototype.errorStyling=function(){this.input.style.borderColor="#f00",this.elemMsgError.style.display="block"},CaptchaMathEquations.prototype.handleClickResetButton=function(t){t.preventDefault(),this.clearCanvas(),this.generateCode(),this.writeCode(),this.input.value="",this.resetStyling()},CaptchaMathEquations.prototype.generateRandomNum=function(t,e){return Math.round(t-.5+Math.random()*(e-t+1))},CaptchaMathEquations.prototype.generateCode=function(){this.code=this.generateRandomNum(0,9)+"+"+this.generateRandomNum(1,9)},CaptchaMathEquations.prototype.getRandomColor=function(){for(var t="",e=0;e<3;e++){var a=""+this.generateRandomNum(50,230);t?t="#"+parseInt(a,16):t+=parseInt(a,16)}return t},CaptchaMathEquations.prototype.getRadiansFromDegrees=function(t){return Math.PI/180*t},CaptchaMathEquations.prototype.transformContext=function(t){if(this.context){var e=this.generateRandomNum(0,4);t%2==0&&(e=-e);var a=this.getRadiansFromDegrees(e);this.context.rotate(a)}},CaptchaMathEquations.prototype.init=function(){this.addCanvas(),this.addResetButton(),this.addInputElement(),this.addMsgError(),this.generateCode(),this.writeCode();return this},CaptchaMathEquations.prototype.checkValidity=function(){var isValid=this.input.value===""+eval(this.code);return isValid?this.resetStyling():this.errorStyling(),isValid},CaptchaMathEquations}();
